<!DOCTYPE html>
<!--Author: Thomas Kubler. using examples from w3schools.com-->
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    
    <script defer src="script.js"></script>
    <title>ECE Communication Scenario</title>

    <!--<link href="styles.css" rel="stylesheet"> -->

    <!-- MathJax for equations means the local styles has to be removed. Apache 2.0 license -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
    </script>
</head>
<body onload="InitPage()">
    
    <div class="container">
        <h1>ECE 315: Communication Scenario</h1>
        <p>This is an interactive page that will carry all entries forward through a single scenario. Go <a href="radarpage.html">here</a> for RADAR.</p>
        <hr />
        <p>The wavelength of a radio transmission can be computed using the speed of light \(c\) and the radio frequency \(f\):</p>
        <a>Frequency: </a>
        <input type="number" id="commfreqarg" min="1" max="999" value="300" step="any" onchange="ChangedInput()">
        <select id="commfreqexp" onchange="ChangedInput()">
            <option value="0">Hz</option>
            <option value="3">kHz</option>
            <option value="6" selected>MHz</option>
            <option value="9">GHz</option>
            <option value="12">THz</option>
        </select>
        <p id="lambdaeqn">eqn</p>
        <hr />
        <p>The gain \(G\) of a parabolic dish antenna of radius \(r\), efficiency \(\eta\), and wavelength \(\lambda\):
            \[G={(2\pi r)^2\over \lambda^2}\eta\]</p>
        <p>The monopole antenna achieves an ideal gain \(G=3.24\) at it's ideal length, one-quarter wavelength: \(L={\lambda \over 4}\) </p>
        <p>The dipole antenna achieves an ideal gain \(G=1.64\) at it's ideal length, one-half wavelength: \(L={\lambda \over 2}\)</p>
        <a>Transmitter:</a>
        <select id="transmittertype" onchange="ChangedInput()">
            <option value="1">Dipole</option>
            <option value="2">Monopole</option>
            <option value="3">Parabolic</option>
            <option value="4"selected>Unspecified</option>
        </select><br>
        <a id="txlengthtext">Radius (not diameter): </a>
        <input type="number" id="txantennalength" min="1" max="999" value="1" step="any" onchange="ChangedInput()">
        <select id="txantennaexp" onchange="ChangedInput()">
            <option value="-3">mm</option>
            <option value="0" selected>m</option>
            <option value="3">km</option>
        </select>
        <br>
        <a id="txetatext">Reflective Efficiency (max 1.0): </a>
        <input type="number" id="txdisheta" min="0" max="1" value="0.7" step="0.01" onchange="ChangedInput()">
        <br>
        <a>Gain:</a><input disabled type="number" id="txgain" value="2" step="any" onchange="ChangedInput()">
        <br><br>
        <a>Receiver:</a>
        <select id="receivertype" onchange="ChangedInput()">
            <option value="1">Dipole</option>
            <option value="2">Monopole</option>
            <option value="3" selected>Parabolic</option>
            <option value="4">Unspecified</option>
        </select><br>
        <a id="rxlengthtext">Radius (not diameter): </a>
        <input type="number" id="rxantennalength" min="1" max="999" value="1" step="any" onchange="ChangedInput()">
        <select id="rxantennaexp" onchange="ChangedInput()">
            <option value="-3">mm</option>
            <option value="0" selected>m</option>
            <option value="3">km</option>
        </select>
        <br>
        <a id="rxetatext">Reflective Efficiency (max 1.0): </a>
        <input type="number" id="rxdisheta" min="0" max="1" value="0.7" step="0.01" onchange="ChangedInput()">
        <br>
        <a>Gain:</a><input disabled type="number" id="rxgain" value="1" step="any" onchange="ChangedInput()">
        <hr />
        <p>The Friis equation for propagation computes power received \(P_R\) based upon power transmitted \(P_T\),
            transmitter gain \(G_T\), receiver gain \(G_R\), wavelength \(\lambda\), and range \(R\).</p>
        <p>Range, \(R\) =
        <input type="number" id="friisrange" value="100" min ="0" max="99999" step="any" onchange="ChangedInput()">
        <select id="friisrangeexp" onchange="ChangedInput()">
            <option value="0">m</option>
            <option value="3" selected>km</option>
        </select></p>
        <p>Transmitter Power, \(P_T\) =
            <input type="number" id="powertransmitted" value="100" min ="0" max="99999" step="any" onchange="ChangedInput()">
            <select id="powertransmittedexp" onchange="ChangedInput()">
                <option value="-3">mW</option>
                <option value="0" selected>W</option>
                <option value="3">kW</option>
                <option value="6">MW</option>
            </select></p>
            <p id="friiseqn">eqn</p>
        <hr />
        <p>Often, it is necessary to solve for a maximum range \(R_{Max}\) (which we'll name \(R_{Friis}\)) based upon a minimum receive power \(P_{Rmin}\).</p>
           <a>Minimum Receive Power, \(P_{Rmin}\) =</a>
           <input type="number" id="prminvalue" value="4" min ="0" max="99999" step="any" onchange="ChangedInput()">
           <select id="prminexp" onchange="ChangedInput()">
            <option value="-18">aW</option>
            <option value="-15">fW</option>
            <option value="-12">pW</option>
            <option value="-9" selected>nW</option>
            <option value="-6">&#181;W</option>
            <option value="-3">mW</option>
            <option value="0" >W</option>
        </select></p>
           <p id="rmaxeqn">eqn</p>
        <hr />
        <p>For a given height \(h\) in feet, the radio-distance to the horizon \(R_{LOS}\) is computed in miles: \(R_{LOS}=\sqrt{2h}\). But when both Tx and Rx are elevated: \(R_{LOS}=\sqrt{2h_1}+\sqrt{2h_2}\)</p>
        <a>Transmitter height above ground: </a>
        <input type="number" id="txheight" value="5000" min="0" max="500000" value="1000" step="any" onchange="ChangedInput()">
        <a>ft. Distance to horizon is: </a><a id="txrlosmi">0</a><a> miles, </a><a id="txrloskm">0</a><a> km.</a>
        <br>
        <a>Receiver height above ground: </a>
        <input type="number" id="rxheight" value="3000" min="0" max="500000" value="1000" step="any" onchange="ChangedInput()">
        <a>ft. Distance to horizon is: </a><a id="rxrlosmi">0</a><a> miles, </a><a id="rxrloskm">0</a><a> km.</a>
        <br><br>
        <a>Whenever a comparison is made, convert \(R_{LOS}\) to kilometers:</a>
        <p id="rloseqn">eqn</p>
        <hr />
        <a>Communication is possible at distances within both limitations: \(R_{Friis}\) and \(R_{LOS}\), meaning that the lower value represents the maximum communication distance: </a>
        <p id="rcommeqn">eqn</p>
        <hr />
        <a>This is a visual representation of the scenario. Use the buttons to exaggerate the heights and Earth's curvature to more easily view the solution. These entries duplicate earlier entries on the page.</a><br>
        <a>Earth: </a><button onclick="ChangeEarth(1)">Rounder</button><button onclick="ChangeEarth(-1)">Flatter</button><br>
        <a>Heights: </a><button onclick="ChangeHeights(1)">Taller</button><button onclick="ChangeHeights(-1)">Shorter</button><br>
        <a>Gain Pattern: </a><button onclick="ChangeGainArc(1)">Tighter</button><button onclick="ChangeGainArc(-1)">Wider</button><br>
        
        <!--This is the duplicated section for the lower half of html which will update values above as well-->
        
        <a>Frequency: </a><input type="number" id="lowerfreq" min="1" max="999" value="300" step="any" onchange="ChangeLowerInput()">
        <select id="lowerfreqexp" onchange="ChangeLowerInput()">
            <option value="0">Hz</option>
            <option value="3">kHz</option>
            <option value="6" selected>MHz</option>
            <option value="9">GHz</option>
            <option value="12">THz</option>
        </select>
        <br>
        <a>Transmitter:</a>
        <select id="lowertxtype" onchange="ChangeLowerInput()">
            <option value="1">Dipole</option>
            <option value="2">Monopole</option>
            <option value="3" selected>Parabolic</option>
            <option value="4">Unspecified</option>
        </select><br>
        <a id="lowertxtext">Radius (not diameter): </a>
        <input type="number" id="lowertxlength" min="1" max="999" value="1" step="any" onchange="ChangeLowerInput()">
        <select id="lowertxexp" onchange="ChangeLowerInput()">
            <option value="-3">mm</option>
            <option value="0" selected>m</option>
            <option value="3">km</option>
        </select>
        <br>
        <a id="lowertxetatext">Reflective Efficiency (max 1.0): </a>
        <input type="number" id="lowertxeta" min="0" max="1" value="0.7" step="0.01" onchange="ChangeLowerInput()">
        <br>
        <a>Gain:</a><input disabled type="number" id="lowertxgain" value="1" step="any" onchange="ChangeLowerInput()">
        <br>
        <a>Receiver:</a>
        <select id="lowerrxtype" onchange="ChangeLowerInput()">
            <option value="1">Dipole</option>
            <option value="2">Monopole</option>
            <option value="3" selected>Parabolic</option>
            <option value="4">Unspecified</option>
        </select><br>
        <a id="lowerrxtext">Radius (not diameter): </a>
        <input type="number" id="lowerrxlength" min="1" max="999" value="1" step="any" onchange="ChangeLowerInput()">
        <select id="lowerrxexp" onchange="ChangeLowerInput()">
            <option value="-3">mm</option>
            <option value="0" selected>m</option>
            <option value="3">km</option>
        </select>
        <br>
        <a id="lowerrxetatext">Reflective Efficiency (max 1.0): </a>
        <input type="number" id="lowerrxeta" min="0" max="1" value="0.7" step="0.01" onchange="ChangeLowerInput()">
        <br>
        <a>Gain:</a><input disabled type="number" id="lowerrxgain" value="1" step="any" onchange="ChangeLowerInput()">
        <br>
        <a>Transmitter Power, \(P_T\) =
            <input type="number" id="lowerpowertrans" value="100" min ="0" max="99999" step="any" onchange="ChangeLowerInput()">
            <select id="lowerpowertransexp" onchange="ChangeLowerInput()">
                <option value="-3">mW</option>
                <option value="0" selected>W</option>
                <option value="3">kW</option>
                <option value="6">MW</option>
            </select></a>
        <a>Minimum Receive Power, \(P_{Rmin}\) =</a>
            <input type="number" id="lowerprmin" value="4" min ="0" max="99999" step="any" onchange="ChangeLowerInput()">
            <select id="lowerprminexp" onchange="ChangeLowerInput()">
             <option value="-18">aW</option>
             <option value="-15">fW</option>
             <option value="-12">pW</option>
             <option value="-9" selected>nW</option>
             <option value="-6">&#181;W</option>
             <option value="-3">mW</option>
             <option value="0" >W</option>
         </select></a>
         <br>
         <a>Transmitter height above ground: </a>
        <input type="number" id="lowertxheight" value="5000" min="0" max="500000" value="1000" step="100" onchange="ChangeLowerInput()">
        <a>Receiver height above ground: </a>
        <input type="number" id="lowerrxheight" value="3000" min="0" max="500000" value="1000" step="100" onchange="ChangeLowerInput()">
        <a>Graphics will be skewed when both heights are \(0ft\).</a>
        <br>

        <div class="CanvasPlacement">
            <canvas class="flight-canvas" id="TheCanvas" width="1200" height="600" style="border:1px solid black"></canvas>
        </div>
        <hr />
        Equation styling from <a href="https://www.mathjax.org">MathJax</a>
        <div style="font-size:10px;">
            Author: Thomas Kubler
        <a style="font-size:10px;" href="mailto:thomas.kubler@gmail.com">thomas.kubler@gmail.com</a>
        <a style="font-size:10px;" href="mailto:thomas.kubler@usafa.edu">thomas.kubler@usafa.edu</a>
    </div>
</body>
</html>